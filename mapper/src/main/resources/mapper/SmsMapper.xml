<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ligg.mapper.SmsMapper">

    <!--获取号码短信列表-->
    <select id="getSmsList" resultType="com.ligg.common.dto.SmsDto">
        select uo.orders_id,
               uo.state,
               p.project_name,
               uo.phone_number,
               uo.created_at,
               r.region_name
        from orders uo
                 join project p on uo.project_id = p.project_id
                 join region r on uo.region_id = r.region_id
        where uo.user_id = #{userId}
          and uo.state != 2
        order by uo.created_at desc
    </select>

    <!--获取短信验证码信息-->
    <select id="getCodeList" resultType="com.ligg.common.vo.CodeVo">
        select orders_id as id, phone_number, code, created_at
        from orders
        where user_id = #{userId}
          and code IS NOT NULL
          and code != ''
        order by created_at desc
    </select>
</mapper>